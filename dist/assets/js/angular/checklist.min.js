"use strict";angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function(e,t){function r(e,t,r){if(angular.isArray(e))for(var c=e.length;c--;)if(r(e[c],t))return!0;return!1}function c(c,n,a){var l=a.checklistModel;a.$set("checklistModel",null),t(n)(c),a.$set("checklistModel",l);var i=e(l),o=i.assign,u=e(a.checklistChange),s=e(a.checklistBeforeChange),h=a.checklistValue?e(a.checklistValue)(c.$parent):a.value,p=angular.equals;if(a.hasOwnProperty("checklistComparator"))if("."==a.checklistComparator[0]){var k=a.checklistComparator.substring(1);p=function(e,t){return e[k]===t[k]}}else p=e(a.checklistComparator)(c.$parent);function f(e,t){var n=i(c.$parent);angular.isFunction(o)&&o(c.$parent,!0===t?function(e,t,c){return r(e=angular.isArray(e)?e:[],t,c)||e.push(t),e}(n,e,p):function(e,t,r){if(angular.isArray(e))for(var c=e.length;c--;)if(r(e[c],t)){e.splice(c,1);break}return e}(n,e,p))}function g(e,t){s&&!1===s(c)?f(h,c[a.ngModel]):c[a.ngModel]=r(e,h,p)}c.$watch(a.ngModel,function(e,t){e!==t&&(s&&!1===s(c)?c[a.ngModel]=r(i(c.$parent),h,p):(f(h,e),u&&u(c)))}),angular.isFunction(c.$parent.$watchCollection)?c.$parent.$watchCollection(l,g):c.$parent.$watch(l,g,!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(e,t){if(("INPUT"!==e[0].tagName||"checkbox"!==t.type)&&"MD-CHECKBOX"!==e[0].tagName&&!t.btnCheckbox)throw'checklist-model should be applied to `input[type="checkbox"]` or `md-checkbox`.';if(!t.checklistValue&&!t.value)throw"You should provide `value` or `checklist-value`.";return t.ngModel||t.$set("ngModel","checked"),c}}}]);